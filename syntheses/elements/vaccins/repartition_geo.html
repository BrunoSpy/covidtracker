<h2 id="cartes_vaccins" class="navbar-anchor">
    Répartition géographique des vaccinés
</h2>

<div class="">
    Coloration en fonction du pourcentage de population vaccinée.
    Données fournies par le Ministère de la Santé.
    Cliquez sur une région pour afficher plus de détails.
</div>
<br>
<div class="row">
    <div id="choixCarte" class="col-md-6 offset-md-3 text-center">
        <div class="btn-group" role="group" aria-label="Choix carte">
            <button id="choixCarteDepartement" type="button" class="btn btn-secondary active">
                Par département
            </button>
            <button id="choixCarteRegion" type="button" class="btn btn-secondary">
                Par région
            </button>
        </div><p></p>
    </div>
    <div id="blocCarteDepartement"  class="col-md-6 offset-md-3">

    </div>
    <div id="blocCarteRegion" class="col-md-6 offset-md-3">
        <!-- <?php include(__DIR__ . '/carteRegion.php') ?> -->
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function(){
        let data = {{ site.data.json.cases.incidence_departements.donnees_departements | jsonify }};
        let departements = {{ site.data.departements | jsonify }};
        //add num dep to data as it is the key used in svg
        for (let key in data) {
            numdep = departements.filter(function(el){
                return el.dep_name.toLowerCase() == key.toLowerCase();
            });
            data[key].num_dep = numdep[0].num_dep;
        }
        $('#blocCarteDepartement').datamap({
            svgPath: "{{ '/assets/svg/departements.svg' | prepend: site.baseurl }}",
            data: data,
            svgId: 'data-num'
        });
    });
</script>
